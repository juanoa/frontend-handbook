---
import { readAll } from "../lib/markdoc/read";
import { chapter } from "../lib/markdoc/frontmatter.schema";
import { SITE_TITLE } from "../config";

const posts = await readAll({
  directory: "chapters",
  frontmatterSchema: chapter,
});

const sortedPosts = posts
  .filter((p) => p.frontmatter.draft !== true)
  .sort((a, b) => b.chapter - a.chapter);
---

<section slot="main">
  <ul class="grid-cols-3">
    {
      sortedPosts.map((post) => {
        return (
          <li class="grid grid-cols-[1fr] md:grid-cols-[1fr_auto] mb-3 md:gap-2 items-start">
            <div class="title">
              <a
                href={`/chapters/${post.slug}`}
                class="unset
                        transition-[background-size] duration-300
                        bg-gradient-to-r bg-left-bottom bg-no-repeat
                        bg-[length:0%_55%] hover:bg-[length:100%_55%] dark:bg-[length:0%_2px] hover:dark:bg-[length:100%_2px]
                        from-primary-blue to-primary-blue dark:from-primary-blue dark:to-primary-blue
                      "
              >
                {post.frontmatter.title}
              </a>
            </div>
          </li>
        );
      })
    }
  </ul>
</section>
